# OpenCV è‡ªåŠ¨æ„å»ºä»“åº“

[![Build and Release OpenCV](https://github.com/crazylin/OpenCV_Build/actions/workflows/build_and_release.yml/badge.svg)](https://github.com/crazylin/OpenCV_Build/actions/workflows/build_and_release.yml)

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ GitHub Actions è‡ªåŠ¨ç¼–è¯‘å¤šä¸ª OpenCV ç‰ˆæœ¬ï¼ˆåŒ…æ‹¬åŠ¨æ€å’Œé™æ€é“¾æ¥åº“ï¼‰å¹¶å°†å…¶å‘å¸ƒåˆ° GitHub Releases çš„é¡¹ç›®ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **å¤šç‰ˆæœ¬æ”¯æŒ**: è‡ªåŠ¨ç¼–è¯‘å¤šä¸ªæŒ‡å®šçš„ OpenCV ç‰ˆæœ¬ã€‚
- **åŠ¨æ€ä¸é™æ€é“¾æ¥**: ä¸ºæ¯ä¸ªç‰ˆæœ¬åŒæ—¶ç”ŸæˆåŠ¨æ€é“¾æ¥åº“ (`.dll`) å’Œé™æ€é“¾æ¥åº“ (`.lib`)ã€‚
- **è·¨ç¼–è¯‘ç¯å¢ƒ**: é’ˆå¯¹ä¸åŒ OpenCV ç‰ˆæœ¬ä½¿ç”¨åˆé€‚çš„ Visual Studio ç‰ˆæœ¬ï¼ˆVS2022 / VS2019ï¼‰è¿›è¡Œç¼–è¯‘ï¼Œä»¥ç¡®ä¿å…¼å®¹æ€§ã€‚
- **è‡ªåŠ¨å‘å¸ƒ**: ç¼–è¯‘å®Œæˆåï¼Œæ‰€æœ‰äº§ç‰©ä¼šè‡ªåŠ¨æ‰“åŒ…å¹¶å‘å¸ƒåˆ°åŒä¸€ä¸ª GitHub Release ä¸­ï¼Œæ–¹ä¾¿ä¸‹è½½ã€‚
- **å®Œå…¨è‡ªåŠ¨åŒ–**: å·¥ä½œæµå¯ä»¥æ‰‹åŠ¨è§¦å‘ï¼Œä¹Ÿå¯ä»¥åœ¨æ¨é€åˆ° `main` åˆ†æ”¯æ—¶è‡ªåŠ¨è¿è¡Œã€‚

## ğŸš€ å¦‚ä½•ä½¿ç”¨

### 1. è§¦å‘å·¥ä½œæµ

æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼å¯åŠ¨æ„å»ºæµç¨‹ï¼š

- **æ‰‹åŠ¨è§¦å‘**:
    1.  è¿›å…¥æœ¬ä»“åº“çš„ **Actions** é¡µé¢ã€‚
    2.  åœ¨å·¦ä¾§é€‰æ‹© **Build and Release OpenCV** å·¥ä½œæµã€‚
    3.  ç‚¹å‡» **Run workflow** æŒ‰é’®ï¼Œç„¶åå†æ¬¡ç¡®è®¤è¿è¡Œã€‚
- **è‡ªåŠ¨è§¦å‘**:
    1.  `fork` æœ¬ä»“åº“ã€‚
    2.  å°†ä»»ä½•æ›´æ”¹æ¨é€åˆ°æ‚¨è‡ªå·±ä»“åº“çš„ `main` æˆ– `master` åˆ†æ”¯ã€‚

### 2. ä¸‹è½½äº§ç‰©

å·¥ä½œæµæ‰§è¡ŒæˆåŠŸåï¼Œæ‰€æœ‰ç¼–è¯‘å¥½çš„æ–‡ä»¶éƒ½ä¼šè¢«ä¸Šä¼ åˆ° GitHub Releasesã€‚

1.  è¿›å…¥æœ¬ä»“åº“çš„ **Releases** é¡µé¢ã€‚
2.  æ‰¾åˆ°æœ€æ–°çš„ Releaseï¼ˆä¾‹å¦‚ `OpenCV Builds (Run <number>)`ï¼‰ã€‚
3.  åœ¨ **Assets** éƒ¨åˆ†ä¸‹è½½æ‚¨éœ€è¦çš„ `.zip` å‹ç¼©åŒ…ã€‚

æ–‡ä»¶åæ ¼å¼å¦‚ä¸‹ï¼š
- `opencv-<ç‰ˆæœ¬å·>-win64-<VCç‰ˆæœ¬>-static.zip`: é™æ€é“¾æ¥åº“
- `opencv-<ç‰ˆæœ¬å·>-win64-<VCç‰ˆæœ¬>.zip`: åŠ¨æ€é“¾æ¥åº“

## ğŸ› ï¸ è‡ªå®šä¹‰

æ‚¨å¯ä»¥è½»æ¾åœ° fork æœ¬é¡¹ç›®å¹¶æ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œå®šåˆ¶ã€‚

1.  **Fork** æœ¬ä»“åº“ã€‚
2.  ç¼–è¾‘ `.github/workflows/build_and_release.yml` æ–‡ä»¶ã€‚

### ä¿®æ”¹ç¼–è¯‘ç‰ˆæœ¬

åœ¨ `jobs.build.strategy.matrix.include` éƒ¨åˆ†ï¼Œæ‚¨å¯ä»¥å¢ã€åˆ ã€æ”¹éœ€è¦ç¼–è¯‘çš„ OpenCV ç‰ˆæœ¬ã€æ“ä½œç³»ç»Ÿæˆ–é“¾æ¥æ–¹å¼ã€‚

```yaml
# .github/workflows/build_and_release.yml

# ...
    strategy:
      fail-fast: false
      matrix:
        include:
          - opencv_version: '4.8.0'
            os: windows-latest # ä½¿ç”¨ VS2022
            linkage: shared
            build_shared_libs: ON
          - opencv_version: '4.8.0'
            os: windows-latest
            linkage: static
            build_shared_libs: OFF
          # åœ¨è¿™é‡Œæ·»åŠ æ›´å¤šç‰ˆæœ¬...
# ...
```

### ä¿®æ”¹ CMake å‚æ•°

åœ¨ `Configure CMake` æ­¥éª¤ä¸­ï¼Œæ‚¨å¯ä»¥æ·»åŠ æˆ–ä¿®æ”¹ CMake å‚æ•°ä»¥æ»¡è¶³æ‚¨çš„ç‰¹å®šéœ€æ±‚ï¼ˆä¾‹å¦‚ï¼Œå¯ç”¨/ç¦ç”¨ç‰¹å®šæ¨¡å—ï¼‰ã€‚

```yaml
# .github/workflows/build_and_release.yml

# ...
    - name: Configure CMake
      # ...
      run: |
        cmake ../opencv \
          -D CMAKE_BUILD_TYPE=Release \
          -D BUILD_SHARED_LIBS=${{ matrix.build_shared_libs }} \
          -D OPENCV_EXTRA_MODULES_PATH=../opencv_contrib/modules \
          # åœ¨è¿™é‡Œæ·»åŠ æ‚¨çš„ CMake å‚æ•°...
# ...
```

## âš™ï¸ å·¥ä½œæµè¯¦è§£

æœ¬ä»“åº“çš„æ ¸å¿ƒæ˜¯ä½äº `.github/workflows/build_and_release.yml` çš„ GitHub Actions å·¥ä½œæµã€‚å®ƒä¸»è¦åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š

1.  **`build` ä»»åŠ¡**:
    - ä½¿ç”¨æ„å»ºçŸ©é˜µ (`matrix`) ä¸ºæ¯ä¸ªå®šä¹‰çš„ OpenCV ç‰ˆæœ¬å’Œé“¾æ¥ç±»å‹ç»„åˆå¯åŠ¨ä¸€ä¸ªå¹¶è¡Œçš„æ„å»ºä»»åŠ¡ã€‚
    - æ£€å‡ºå¯¹åº”ç‰ˆæœ¬çš„ `opencv` å’Œ `opencv_contrib` æºç ã€‚
    - ä½¿ç”¨ CMake é…ç½®æ„å»ºé€‰é¡¹å¹¶æ‰§è¡Œç¼–è¯‘ã€‚
    - å°†ç¼–è¯‘å¥½çš„æ–‡ä»¶ï¼ˆå¤´æ–‡ä»¶ã€åº“æ–‡ä»¶ã€äºŒè¿›åˆ¶æ–‡ä»¶ï¼‰æ‰“åŒ…æˆ `.zip` æ–‡ä»¶ã€‚
    - å°†æ¯ä¸ª `.zip` æ–‡ä»¶ä½œä¸ºæ„å»ºäº§ç‰© (artifact) ä¸Šä¼ ã€‚

2.  **`release` ä»»åŠ¡**:
    - æ­¤ä»»åŠ¡ä¾èµ–äºæ‰€æœ‰ `build` ä»»åŠ¡çš„æˆåŠŸå®Œæˆã€‚
    - å®ƒä¼šä¸‹è½½æ‰€æœ‰ç”± `build` ä»»åŠ¡ä¸Šä¼ çš„æ„å»ºäº§ç‰©ã€‚
    - åˆ›å»ºä¸€ä¸ªä»¥æ„å»ºè¿è¡Œå·å‘½åçš„å•ä¸€ GitHub Releaseã€‚
    - å°†æ‰€æœ‰ä¸‹è½½çš„ `.zip` æ–‡ä»¶ä½œä¸ºèµ„æº (assets) ä¸Šä¼ åˆ°è¿™ä¸ª Release ä¸­ã€‚

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®çš„è„šæœ¬ä»£ç ä½¿ç”¨ [MIT License](LICENSE) æˆæƒã€‚OpenCV æœ¬èº«ä½¿ç”¨ Apache 2 Licenseã€‚ 